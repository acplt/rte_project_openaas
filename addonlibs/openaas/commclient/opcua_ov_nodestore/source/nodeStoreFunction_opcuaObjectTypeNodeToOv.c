/******************************************************************************
 *
 *   FILE
 *   ----
 *   nodeStoreFunctions.c
 *
 *   History
 *   -------
 *   2014-10-21   File created
 *
 *******************************************************************************
 *
 *   This file is generated by the 'acplt_builder' command
 *
 ******************************************************************************/

#ifndef OV_COMPILE_LIBRARY_opcua
#define OV_COMPILE_LIBRARY_opcua
#endif

#include "libov/ov_macros.h"
#include "ksbase.h"
#include "opcua.h"
#include "opcua_helpers.h"
#include "NoneTicketAuthenticator.h"
#include "libov/ov_path.h"
#include "libov/ov_memstack.h"
#include "ks_logfile.h"

extern OV_INSTPTR_opcua_uaServer opcua_pUaServer;




OV_DLLFNCEXPORT UA_StatusCode opcua_nodeStoreFunctions_opcuaObjectTypeNodeToOv(
		void *handle, UA_ObjectTypeNode* opcuaNode, OV_INSTPTR_opcua_objectTypeNode ovNode) {

	OV_RESULT result = 0;
	OV_INSTPTR_ov_domain ptr = Ov_StaticPtrCast(ov_domain, Ov_SearchChild(ov_containment, &(pdb->root), "TechUnits"));
	result = Ov_CreateObject(opcua_objectTypeNode, ovNode, ptr, "opcuaToOVNode");


	copyOPCUAQualifiedNameToOV	(&opcuaNode->browseName	, &ovNode->p_browseName);
	copyOPCUALocalizedTextToOV	(&opcuaNode->description, &ovNode->p_description);
	copyOPCUALocalizedTextToOV	(&opcuaNode->displayName, &ovNode->p_displayName);
	copyOPCUANodeIdToOV			(&opcuaNode->nodeId		, &ovNode->p_nodeId);

	ovNode->v_nodeClass 	= opcuaNode->nodeClass;
	ovNode->v_userWriteMask = opcuaNode->userWriteMask;
	ovNode->v_writeMask 	= opcuaNode->writeMask;

	//copy references to ov node structure
	OV_INSTPTR_opcua_reference tmpNode;
	for (size_t i = 0; i < opcuaNode->referencesSize; i++){
		result = Ov_CreateObject(opcua_reference, tmpNode, ovNode, "refNode");
		copyOPCUAReferenceNodeToOV(&opcuaNode->references[i], tmpNode);
	}

	//Object Type attributes
	return result;
}

